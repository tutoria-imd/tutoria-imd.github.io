---
import type { Link } from "@pages/data";
import MobileMenu from "./MobileMenu.astro";

interface Props {
  links?: Link[];
}

const { links = [] } = Astro.props;
---

<nav slot="navbar" class="p-4">
  <div class="container mx-auto flex items-center justify-between">
    <div class="text-xl font-bold">
      <h1>Tutoria IMD</h1>
    </div>
    {
      links.length > 0 ? (
        <div
          id="menu"
          class:list={[
            links.length > 1 ? "hidden md:flex" : "flex",
            "space-x-4 flex-col md:flex-row md:items-center",
            "bg-blue-900 md:bg-transparent p-4 md:p-0 absolute md:static",
            "top-full left-0 w-full md:w-auto z-50",
          ]}
        >
          {links.map((link) => (
            <a
              href={link.href}
              class:list={[
                "relative py-2 after:content-[''] after:absolute after:bottom-0",
                "after:left-0 after:w-0 after:h-0.5 after:bg-blue-300",
                "after:transition-all after:duration-300 hover:after:w-full",
              ]}
            >
              {link.title}
            </a>
          ))}
          {links.length > 1 && <MobileMenu links={links} />}
        </div>
      ) : (
        <div id="menu" class="space-x-4">
          <a
            href="index.html"
            class="hover:text-blue-200 transition duration-150 ease-in-out"
          >
            Voltar
          </a>
        </div>
      )
    }
  </div>
  <script>
    const details = document.getElementById(
      "mobile-menu",
    ) as HTMLDetailsElement | null;
    document.addEventListener("click", (event) => {
      if (!details) return;
      const isClickInside = details.contains(event.target as Node);
      if (details.open && !isClickInside) details.open = false;
    });
  </script>
</nav>
